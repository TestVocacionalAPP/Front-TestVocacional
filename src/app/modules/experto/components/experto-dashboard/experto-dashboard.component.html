<div class="mat-elevation-z8">
  <mat-toolbar style="background-color: rgb(62, 110, 128);">
    <span>Solicitudes de Asesoría</span>
  </mat-toolbar>

  <div class="table-container">
    <table mat-table [dataSource]="dataSource" class="mat-table" matSort>

      <!-- Enumeración Column -->
      <ng-container matColumnDef="indice">
        <th mat-header-cell *matHeaderCellDef>#</th>
        <td mat-cell *matCellDef="let asesoria; let i = index"> {{ i + 1 }} </td>
      </ng-container>

      <!-- Nombre del Usuario Column -->
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre del Usuario</th>
        <td mat-cell *matCellDef="let asesoria"> {{ asesoria.nombreUsuario }} </td>
      </ng-container>

      <!-- Correo Electrónico Column -->
      <ng-container matColumnDef="correo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Correo Electrónico</th>
        <td mat-cell *matCellDef="let asesoria"> {{ asesoria.correoUsuario }} </td>
      </ng-container>

      <!-- Asunto Column -->
      <ng-container matColumnDef="asunto">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Asunto</th>
        <td mat-cell *matCellDef="let asesoria"> {{ asesoria.asunto }} </td>
      </ng-container>

      <!-- Fecha de Solicitud Column -->
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha de Solicitud</th>
        <td mat-cell *matCellDef="let asesoria"> {{ asesoria.fechaSolicitada | date:'shortDate' }} </td>
      </ng-container>

      <!-- Estado Column -->
      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
        <td mat-cell *matCellDef="let asesoria"> {{ asesoria.estado }} </td>
      </ng-container>

      <!-- Acciones Column -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef>Acciones</th>
        <td mat-cell *matCellDef="let asesoria">
          <ng-container *ngIf="puedeMostrarBotones(asesoria)">
            <button mat-raised-button color="primary" (click)="aceptarSolicitud(asesoria)">
              Aceptar
            </button>
            <button mat-raised-button color="warn" (click)="rechazarSolicitud(asesoria)">
              Rechazar
            </button>
          </ng-container>
          <ng-container *ngIf="esConfirmada(asesoria)">
            <mat-icon color="primary" class="icono-confirmado">check_circle</mat-icon> Confirmada
          </ng-container>
          <ng-container *ngIf="esRechazada(asesoria)">
            <mat-icon color="warn" class="icono-rechazada">cancel</mat-icon> Rechazada
          </ng-container>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
